<templateSet group="Kotlin">
  <template name="provide" value="@Provides&#10;@Singleton&#10;fun provide$NAME$Manager(manager: $NAME$ManagerImpl): $NAME$Manager = manager" description="" toReformat="false" toShortenFQNames="true">
    <variable name="NAME" expression="" defaultValue="" alwaysStopAt="true" />
    <context>
      <option name="KOTLIN" value="true" />
    </context>
  </template>
  <template name="repo" value="&#10;import co.bird.db.DatabaseManager&#10;import co.bird.model.onboarding.ContractorOnboardEvent&#10;import co.bird.skate.Database&#10;import co.bird.skate.and&#10;import co.bird.skate.eq&#10;import co.bird.skate.execute&#10;import co.bird.skate.generate&#10;import co.bird.skate.insert&#10;import co.bird.skate.isNull&#10;import co.bird.skate.query&#10;import co.bird.skate.queryFirst&#10;import co.bird.skate.returningAll&#10;import co.bird.skate.selectAll&#10;import co.bird.skate.to&#10;import co.bird.skate.update&#10;import co.bird.skate.values&#10;import co.bird.skate.where&#10;import co.bird.util.now&#10;import java.time.OffsetDateTime&#10;import java.util.UUID&#10;import javax.inject.Inject&#10;&#10;interface $NAME$Repository {&#10;  fun insert($MODEL_NAME$: $MODEL_CLASS$): $MODEL_CLASS$&#10;  fun byId(id: UUID): ContractorOnboardEvent?&#10;  fun delete(id: UUID, deletedAt: OffsetDateTime = now()): ContractorOnboardEvent?&#10;}&#10;&#10;class $NAME$RepositoryImpl @Inject constructor(&#10;  private val db: DatabaseManager&#10;) : $NAME$Repository {&#10;&#10;  override fun insert($MODEL_NAME$: $MODEL_CLASS$): $MODEL_CLASS$ {&#10;    $MODEL_CLASS$::class&#10;      .insert()&#10;      .values($MODEL_NAME$)&#10;      .generate(db.dialect)&#10;      .execute(db, database = Database.PRIMARY)&#10;    return $MODEL_NAME$&#10;  }&#10;&#10;  override fun byId(id: UUID): ContractorOnboardEvent? {&#10;    return ContractorOnboardEvent::class&#10;      .selectAll()&#10;      .where(&#10;        and(&#10;          ContractorOnboardEvent::deletedAt.isNull(),&#10;          ContractorOnboardEvent::id eq id&#10;        )&#10;      )&#10;      .generate(db.dialect)&#10;      .queryFirst(db, database = Database.REPLICA)&#10;  }&#10;&#10;  override fun byUser(userId: UUID): List&lt;ContractorOnboardEvent&gt; {&#10;    return ContractorOnboardEvent::class&#10;      .selectAll()&#10;      .where(&#10;        and(&#10;          ContractorOnboardEvent::deletedAt.isNull(),&#10;          ContractorOnboardEvent::userId eq userId&#10;        )&#10;      )&#10;      .generate(db.dialect)&#10;      .query(db, database = Database.REPLICA)&#10;  }&#10;&#10;  override fun byUserAndField(userId: UUID, fieldId: UUID): ContractorOnboardEvent? {&#10;    return ContractorOnboardEvent::class&#10;      .selectAll()&#10;      .where(&#10;        and(&#10;          ContractorOnboardEvent::deletedAt.isNull(),&#10;          ContractorOnboardEvent::userId eq userId,&#10;          ContractorOnboardEvent::fieldId eq fieldId&#10;        )&#10;      )&#10;      .generate(db.dialect)&#10;      .queryFirst(db, database = Database.REPLICA)&#10;  }&#10;&#10;  override fun delete(id: UUID, deletedAt: OffsetDateTime): ContractorOnboardEvent? {&#10;    return ContractorOnboardEvent::class&#10;      .update(&#10;        ContractorOnboardEvent::deletedAt to deletedAt&#10;      )&#10;      .where(ContractorOnboardEvent::id eq id)&#10;      .returningAll()&#10;      .generate(db.dialect)&#10;      .queryFirst(db, database = Database.PRIMARY)&#10;  }&#10;&#10;  override fun insert(events: List&lt;ContractorOnboardEvent&gt;): List&lt;ContractorOnboardEvent&gt; {&#10;    if (events.isEmpty()) return events&#10;&#10;    ContractorOnboardEvent::class&#10;      .insert()&#10;      .values(events)&#10;      .generate(db.dialect)&#10;      .execute(db, database = Database.PRIMARY)&#10;    return events&#10;  }&#10;}&#10;" toReformat="true" toShortenFQNames="true">
    <variable name="NAME" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="MODEL_NAME" expression="" defaultValue="" alwaysStopAt="true" />
    <variable name="MODEL_CLASS" expression="" defaultValue="" alwaysStopAt="true" />
    <context>
      <option name="KOTLIN" value="true" />
    </context>
  </template>
</templateSet>